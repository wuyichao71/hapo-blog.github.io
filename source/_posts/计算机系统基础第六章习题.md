---
title: 计算机系统基础第六章习题
date: 2023-05-31 01:24:21
mathjax: true
categories:
    - 计算机
tags:
    - 计算机系统基础
---

# 第六章

## 1.
**随机存取存储器(RAM)**: 随机存取存储器的特点是按地址访问存储单元, 因为每个地址译码时间相同, 所以, 在不考虑芯片内部缓冲的前提下, 每个单元的访问时间是一个常数, 与地址无关.  
**顺序存取存储器(SAM)**: 顺序存取存储器的特点是信息按顺序存放和读出, 其存取时间取决于信息存放位置, 以记录快为单位编址.  
**直接存取存储器(DAM)**: 直接存取存储器的存取方式兼有随机访问和顺序访问的特点. 首先直接定位到需读写信息所在区域的开始处, 然后按顺序方式存取.  
<!--more-->
**相联存储器(AM)**: 按内容检索到存储位置进行读写.  
**只读存储器(ROM)**: 只读存储器芯片中的信息一旦确定, 通常在联机情况下只能读不能写, 但在某些情况下也可重新写入.  
**可读可写存储器**: 读写存储器中的信息可以读出和写入.  
**易失性存储器**: 在电源关闭时信息自动丢失.  
**记忆单元(cell)**: 存储0或1的单元, 具有两种稳态的能表示二进制0或1的物理器件.  
**存储阵列(bank)**: 由记忆单元构成的存储阵列, 是存储器的核心部分.  
**编址单位**: 是指具有相同地址的那些位元构成的一个单位.  
**编址方式**: 对各存储单元进行编号的方式.  
**最大可寻址范围**: 由地址线决定的最大地址范围.  
**读出时间**: 从存储器街道读命令开始至信息被送到数据线上所需的时间.  
**写入时间**: 存储器街道写命令开始至信息被写入存储器所需的时间.  
**存储周期**: 存储器进行一次读写操作所需要的全部时间, 也就是存储器进行连续读写操作所允许的最短间隔时间.  
**存储器带宽**: 表示存储器被连续访问时可以提供的数据传送速率.  
**静态RAM(SRAM)**: SRAM要用6个晶体管实现一个二进位, 所用MOS管多, 占硅片面积大, 因而功耗大, 集成度低, 价格昂贵.  
**动态RAM(DRAM)**: DRAM只要一个晶体管就能实现一个二进位, 所用MOS管少, 占硅片面积小, 因而功耗小, 集成度高, 价格相对便宜.  
**闪存(Flash存储器)**: 也称为闪存, 是高密度非易失性读写存储器, 它兼有RAM和ROM的优点, 而且功耗低, 集成度高, 不需后备电源.  
**同步DRAM**: SDRAM芯片与当年Intel推出的芯片组中北桥芯片的前端总线同步运行.  
**行地址选通道信号(RAS)**: 控制行传送的信号  
**列地址选通道信号(CAS)**: 控制列传送的信号  
**超元(supercell)**: 位扩展组成的记忆单元  
**内部行缓冲**: 用来缓存指定行中每一行的数据  
**磁盘驱动器**: 磁盘驱动器主要由多张硬盘片、主轴、主轴电机、移动臂、磁头和控制电路等部分组成, 通过接口和磁盘控制器链接.  
**磁盘控制器**: 磁盘控制器包括控制逻辑、时序电路、"并&rarr;串"转换和"串&rarr;并"转换电路  
**未格式化容量**: 硬盘的未格式化容量是指按道密度和位密度计算出来的容量, 它包括了头空、ID域、CRC码等信息, 是可利用的所有磁化单元的总数.  
**格式化容量**: 磁盘实际数据容量  
**寻道时间**: 磁头移动到指定磁道所需时间  
**旋转等待时间**: 要读写的扇区旋转到磁头下方所需要的时间  
**数据传输时间**: 传输一个扇区的时间  
**平均存取时间**: 近似等于平均寻道时间和平均等待时间之和  
**固态硬盘(SSD)**: 使用NAND闪存组成的外部存储系统  
**多模块交叉存储**: 主存采用多模块交叉存取方式, 在主存、总线和cache之间每次按一个字的宽度进行传送  
**高速缓存(cache)**: cache是一种小容量高速缓冲存储器, 由快速的SRAM组成, 直接制作在CPU芯片内, 速度较快, 几乎与CPU处于同一个量级.  
**时间局部性**: 被访问的某个存储单元在一个较短的时间间隔内很可能又被访问.  
**空间局部性**: 被访问的某个存储单元的临近单元在一个较短的时间间隔内很可能又被访问.  
**主存块**: 为便于cache和内存间交换信息, cache和主存都被划分为相等的区域.  
**cache行(槽)**: cache中存放一个主存块的区域.  
**命中率**: CPU访问单元所在的主存块在cache中的概率. 命中次数与访问总次数之比.  
**命中时间**: 命中时, CPU在cache中直接存取信息, 所用的时间开销.  
**缺失率**: 不命中次数于访问总次数之比.  
**缺失损失**: 从主存读入一个主存快到cache的时间.  
**直接映射**: 把主存中每一块映射到一个固定cache行中, 也称为模映射.  
**全相联映射**: 一个主存快可装入cache任意一行中.  
**组相联映射**: 将cache分成大小相等的组, 每个主存被映射到cache固定组中的任意一行.  
**替换策略**: 当新的一个主存块复制到cache时, cache中的对应行可能已经全部被占满, 此时, 必须选择淘汰掉一个cache行中的主存块, 如何选择块的策略.  
**FIFO算法**: 总是悬着最早装入cache的主存快被替换掉.  
**LRU算法**: 总是选择近期最少使用的主存块被替换.  
**LRU位**: 用来记录主存块的使用情况的计数值  
**cache一致性**: 当CPU进行写操作需对cache着中的内容进行更新时, 需要和主存保持一致.  
**回写法(write back)**: 当CPU执行写操作时, 若写命中, 则信息只被写入cache而不被写入主存; 若写不命中, 则在cache中分配一行, 将主存块调入该cache行中并更新cache中相应单元的内容.  
**全写法(write through)**: 当CPU执行写操作时, 若命中, 则同时写cache和主存; 若不命中, 则可以有写分配法和非写分配法.  
**关联度**: 反映一个主存块对应的cache行的个数  
**虚拟地址(逻辑地址)**: 通过存储器管理部件转化为主存的物理地址.  
**虚拟页号**: 虚拟地址空间中的页.  
**物理地址**: 主存地址  
**页框(页帧)**: 主存空间也被划分成同样大小的页框  
**物理页号**: 实页号  
**未分配页**: 没有和任何内容相关联的页  
**已分配页**: 代码和数据等有内容的区域所关联的页面  
**未缓存页**: 未调入主存而存在硬盘上的页  
**已缓存页**: 已调入主存而被缓存在DRAM中的页面  
**请求分页**: 每次访问指令或数据仅将当前需要的页面从硬盘调入主存页面中, 而进程中其他不活跃的页面保留在硬盘上  
**页故障(page fault)**: 访问某个信息所在页不再主存中, 即缺页  
**页表**: 页表建立了各个虚拟页与所存放的主存页框号或磁盘上存储位置之间的关系  
**页表基址寄存器**: 记录也表在主存的首地址  
**有效位(装入位)**: 用来表示对应页面是否在内存中  
**修改位(赃位)**: 用来说明页面是否被修改过  
**访问权限位**: 用来说明页面是可读可写、只读还是只可执行等, 用于存储保护.  
**快表(TLB)**: 在高速缓存中的页表组成的页表, 又称为后备转换缓冲器  
**段表**: 记录每个段在主存中的位置  
**段页式**: 程序按模块分段, 段内再分页, 用段表和页表(每段一个页表)进行两级定位管理  
**特权指令**: 只有操作系统内核程序才能用的特殊指令  
**特权模式**: 具有不同的特权级别或运行模式  
**内核态(模式)**: 执行内核程序时处理器所处的模式  
**用户态(模式)**: 执行用户程序时处理器所处的模式  
**存储保护**: 为避免主存中多道程序相互干扰, 防止某进程出错而破坏其他进程的正确性, 或某进程不合法地访问其他进程的代码或数据区, 对每个进程进行的存储保护  
**地址越界**: 是否访问了不该访问的区域  
**访问越权**: 指定单元所进行的操作类型不符合存取权限  
**访问越级**: 不符合访问当前单元的最低等级要求  

## 2.
(1) 某一种元件制造的存储器很难同时满足大容量、高速度和低成本的要求. 因此, 在计算机中有必要把各种不同容量和不同存取速度的存储器按一定的结构有机地组织在一起, 形成层次化的存储器结构, 把程序和数据按不同的层次存放在各级存储器中, 使得整个存储系统在速度、容量和价格等方面具有较好的综合性能指标.  
数据使用时一般只在相邻两层之间复制传送, 而且总是从慢速存储器复制到快速存储器. 传送的单位是一个定长块, 因此需要确定定长快的大小, 并在相邻两层间建立快之间的映射关系.  
(2) SRAM要用6个晶体管实现一个二进位, 所用MOS管多, 占硅片面积大, 因而功耗大, 集成度低, 价格昂贵; 但是, 由于它采用一个正负反馈触发器电路来储存信息, 所以读写速度快且无须刷新和读后再生. 因而, SRAM适合做高速小容量的半导体存储器, 如高速缓冲存储器.  
DRAM只要一个晶体管就能实现一个二进位, 所用MOS管少, 占硅片面积小, 因而功耗小, 集成度高, 价格相对便宜; 但是, 由于它采用电容储存电荷来存储信息, 所以速度较慢, 且必须定时刷新和读后再生. 因而DRAM适合做慢速大容量的半导体存储器, 如主存储器. 
(3) 如果访问不对齐, 则可能需要访问多次存储器, 如果数据对齐了, 则只要访问一次即可. 
(4) 由于程序访问的局部性特点, cache的命中率可以达到很高, 接近于1. 因此, 虽然缺失损失远大于命中时间, 但最终的平均访问时间仍可接近cache的访问时间.
(5) cache对程序员来说是透明的, 程序员编程时根本不知道有cache的存在, 更不用考虑信息存放在主存还是在cache, 因此, cache位于微体系结构层面.
(6) 关联度反映一个主存块对应的cache行的个数. 关联度越高, 命中率越高. 关联度越高, 命中时间越长.
(7) 因为直接映射的关联度是1, 每个内存块有固定的cache行. 
(8) 由于cache中的内容是某些主存块的副本, 因此, 当CPU进行写操作需对cache内容进行更新时, 就存在cache和主存如何保持一致的问题. 读操作不需要, 因为读操作不会改变主存内容.
(9) 物理地址是主存中的实际地址, 虚拟地址是不受物理内存空间限制并且比物理内存空间大得多的虚拟逻辑地址空间中的地址, 地址转化由硬件完成, 因为在地址转换过程中需要由硬件检查是否发生了访问信息不在主存或访问越界等情况. 
(10) 页表记录了各个虚拟页于所存放的主存页框号或磁盘上存储位置直接的对应关系. 快表是在高速缓存中的页表项组成的页表.
(11) "cache--主存"主要是通过直接映射、全相联映射、组相联映射.
"主存--磁盘"主要通过分页式、分段式和段页式.

## 3.
(1) 8个
(2) 4个
(3) 32位, 后29位, 后29位中的前13位, 29位中的接下来的13位, 最后的3位.

## 4. 
(1) 8000H~FFFFH, 4, 最高位.
(2) 2044

## 5.
$$\frac{20000}{500M}s+(10ms+\frac{0.5}{7200}s+2ms+\frac{4KB}{40MB}s)\times2 = 24.4ms$$
41次

## 6.
不需要, 由于程序的局部性, 使用cache已经能接近cache访问时间了

## 7.
(1)
```C
#define N 2048

int sum_array1(int *sum, int a[N][N])
{
    *sum += a[1][0];
}

int sum_array(int a[N][N])
{
    int sum = 0
    sum += a[0][0];
    sum_array1(&sum, a);
    return sum;
}
```
(2)
```C
#defin N 2048
int sum_array(int a[N][N])
{
    int sum = 0;
    int i, j;
    for(j = 0; j < N; j++)
    {
        for(i = 0; i < N; i++)
        {
            sum  += a[i][j];
        }
    }
    return sum;
}
```
(3)
```C
#define N 2048

int sum_array1(int *sum, int a[N][N])
{
    *sum += a[0][1];
}

int sum_array(int a[N][N])
{
    int sum = 0
    sum += a[0][0];
    sum_array1(&sum, a);
    return sum;
}
```
(4)
```C
#defin N 2048
int sum_array(int a[N][N])
{
    int sum = 0;
    int i, j;
    for(i = 0; i < N; i++)
    {
        for(j = 0; j < N; j++)
        {
            sum  += a[i][j];
        }
    }
    return sum;
}
```
## 8.
(1) 30, 标记14:cache行号9:块内地址7
(2) 73214B

## 9.
(1) 1/16
(2) 3/8

## 10.
```C
int sum_array(int a[N][N][N])
{
    int i, j, k, sum = 0;
    for(k = 0; i < N; K++)
        for(i = 0; i < N; i++)
            for(j = 0; j < N; j++)
                sum += a[k][i][j];
    return sum;
}
```
由于程序的空间局部性, 访问过的单元的附近单元被存储在cache中,可以加快访问, 在N较大时, 原本程序几乎没有空间局部性

## 11.
1最好, 3最差

## 12.
(1) 数组x和数组y没有时间局部性, 若x和y属于相同的内存块,则空间局部性很好, 命中率高; 若x和y属于不同的内存块, 且映射到不同的cache行, 则空间局部性较好, 命中率较高; 若x和y属于不同的内存块, 且映射到相同的cache行, 则空间局部性较好, 命中率较差.
(2) 因为x和y映射到同一cache行, 因此命中率为0.
(3) 50%
(4) 75%

## 13.
题目有误, 按照自己的理解做. 
<table>
<tr>
<th></th>
<th colspan=4>src数组</th>
<th colspan=4>dst数组</th>
</tr>
<tr>
<td></td>
<td>col=0</td>
<td>col=1</td>
<td>col=2</td>
<td>col=3</td>
<td>col=0</td>
<td>col=1</td>
<td>col=2</td>
<td>col=3</td>
</tr>
<tr>
<td>row=0</td>
<td>0/miss</td>
<td>0/hit</td>
<td>0/miss</td>
<td>0/hit</td>
<td>1/miss</td>
<td>1/miss</td>
<td>1/miss</td>
<td>1/miss</td>
</tr>
<tr>
<td>row=1</td>
<td>1/miss</td>
<td>1/miss</td>
<td>1/hit</td>
<td>1/miss</td>
<td>0/miss</td>
<td>0/miss</td>
<td>0/miss</td>
<td>0/miss</td>
</tr>
<tr>
<td>row=2</td>
<td>0/miss</td>
<td>0/hit</td>
<td>0/miss</td>
<td>0/hit</td>
<td>1/miss</td>
<td>1/miss</td>
<td>1/miss</td>
<td>1/miss</td>
</tr>
<tr>
<td>row=3</td>
<td>1/miss</td>
<td>1/miss</td>
<td>1/hit</td>
<td>1/miss</td>
<td>0/miss</td>
<td>0/miss</td>
<td>0/miss</td>
<td>0/miss</td>
</tr>
</table>

<table>
<tr>
<th></th>
<th colspan=4>src数组</th>
<th colspan=4>dst数组</th>
</tr>
<tr>
<td></td>
<td>col=0</td>
<td>col=1</td>
<td>col=2</td>
<td>col=3</td>
<td>col=0</td>
<td>col=1</td>
<td>col=2</td>
<td>col=3</td>
</tr>
<tr>
<td>row=0</td>
<td>0/miss</td>
<td>0/hit</td>
<td>0/hit</td>
<td>0/hit</td>
<td>1/miss</td>
<td>1/miss</td>
<td>1/miss</td>
<td>1/hit</td>
</tr>
<tr>
<td>row=1</td>
<td>1/miss</td>
<td>1/miss</td>
<td>1/hit</td>
<td>1/hit</td>
<td>2/miss</td>
<td>2/hit</td>
<td>2/miss</td>
<td>2/miss</td>
</tr>
<tr>
<td>row=2</td>
<td>2/miss</td>
<td>2/hit</td>
<td>2/miss</td>
<td>2/hit</td>
<td>3/miss</td>
<td>3/hit</td>
<td>3/hit</td>
<td>3/miss</td>
</tr>
<tr>
<td>row=3</td>
<td>3/miss</td>
<td>3/hit</td>
<td>3/hit</td>
<td>3/miss</td>
<td>4/miss</td>
<td>4/hit</td>
<td>4/hit</td>
<td>4/hit</td>
</tr>
</table>


## 14.
(1) 标记16:cache行号4:块内地址6
(2) 4608
(3) 1.16

## 15.
(1) 回写法, 回写法可以减少访问内存的次数, 大大降低主存带宽的要求
(2) 全写法, 保证了数据的一致性

## 16.
0, 1， 16， 17， 2， 18， 3， 19

## 17.
0, 1, 3, 0

## 18.
引起损失:  
cache 1: 0.49  
cache 2: 0.4  
cache 3: 0.35  
cache 1损失最大.  

执行速度:  
cache 1: 956MHz  
cache 2: 992MHz  
cache 3: 946MHz  
cache 2最快  

## 19.


## 20.

## 21.

## 22.

## 23.